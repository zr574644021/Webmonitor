webpackJsonp([10],{527:function(e,t,a){var s=a(200)(a(545),a(564),null,null);e.exports=s.exports},545:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(201),r=a.n(s);t.default={data:function(){return{tableData:[],multipleSelection:[],select:{Name:"",Dp:{Id:0,Name:""}},options:[],deletes:[],paging:{total:0,pageSize:15,page:1},editFormVisible:!1,editLoading:!1,editFormRules:{Name:[{required:!0,message:"请输入姓名",trigger:"blur"}],PhoneNumber:[{required:!0,message:"请输入电话号码",trigger:"blur"}]},editForm:{Id:0,Name:"",Dp:{Id:0,Name:""},PhoneNumber:""},addFormVisible:!1,addLoading:!1,addFormRules:{Name:[{required:!0,message:"请输入姓名",trigger:"blur"}],PhoneNumber:[{required:!0,message:"请输入电话号码",trigger:"blur"}],Options:[{required:!0,message:"请选择部门",trigger:"blur"}]},addForm:{Id:0,Name:"",Dp:{Id:0,Name:""},PhoneNumber:""}}},created:function(){this.getData(),this.options=[]},methods:{handleCurrentChange:function(e){this.paging.page=e},getData:function(){var e=this;this.$axios.post("/servermanage/manager/getall").then(function(t){switch(t.data.status){case 7002:e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"});break;case 4003:var a=t.data.managers;console.log(a),e.tableData=a,e.paging.total=a.length,0===e.options.length&&e.$axios.post("/servermanage/department/getall").then(function(t){switch(t.data.status){case 7002:e.$message({message:"您未登录!",type:"error"}),e.$router.push({path:"/login"});break;case 4003:for(var a=t.data.departments,s=0;s<a.length;s++)e.options.push({label:a[s].Id,value:a[s].Name});break;case 8e3:e.$message({message:"信息查找失败!",type:"error"})}});break;case 9001:e.$message({message:"获取信息失败!",type:"error"})}})},search:function(){""===this.select.Name&&""===this.select.Dp.Name?(this.is_search=!1,this.querySearch()):(this.is_search=!0,this.querySearch())},querySearch:function(){var e=this;if(this.is_search){var t=r()({},this.select);this.$axios.post("/servermanage/manager/query",t).then(function(t){switch(t.data.status){case 7002:e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"});break;case 4003:e.tableData=t.data.managers,e.paging.total=t.data.managers.length;break;case 8e3:e.$message({message:"搜索失败！",type:"error"});break;case 9001:e.tableData=[]}})}else this.getData()},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=r()({},t)},handleAdd:function(){this.addFormVisible=!0,this.editForm.Name="",this.editForm.PhoneNumber=""},handleDelete:function(e,t){var a=this,s=r()({},t);this.deletes[0]=s,this.$axios.post("/servermanage/manager/remove",this.deletes).then(function(e){switch(e.data.status){case 9002:a.$message.error("删除失败!");break;case 4003:a.$message.success("删除成功");break;case 7002:a.$message({message:"您未登录！",type:"error"}),a.$router.push({path:"/login"})}a.getData()})},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;for(var t=r()({},e.editForm),a=0;a<e.options.length;a++)if(t.Dp.Name===e.options[a].value){t.Dp.Id=e.options[a].label;break}e.$axios.post("/servermanage/manager/set",t).then(function(t){switch(e.editLoading=!1,t.data.status){case 4003:e.$message({message:"编辑成功",type:"success"});break;case 9003:e.$message({message:"编辑失败",type:"error"});break;case 7002:e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"})}e.$refs.editForm.resetFields(),e.editFormVisible=!1,e.getData()})})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;for(var t=r()({},e.addForm),a=0;a<e.options.length;a++)if(t.Dp.Name===e.options[a].value){t.Dp.Id=e.options[a].label;break}e.$axios.post("/servermanage/manager/add",t).then(function(t){switch(e.addLoading=!1,t.data.status){case 4003:e.$message({message:"添加成功!",type:"success"});break;case 8e3:e.$message({message:"该部门不存在!",type:"error"});break;case 9e3:e.$message({message:"该管理员已存在!",type:"error"});break;case 7002:e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"})}e.$refs.addForm.resetFields(),e.addFormVisible=!1,e.getData()})})})},delAll:function(){var e=this;this.$axios.post("/servermanage/manager/remove",this.multipleSelection).then(function(t){switch(t.data.status){case 9002:e.$message.error("删除失败!");break;case 4003:e.$message.success("删除成功");break;case 7002:e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"})}e.getData()}),this.multipleSelection=[]},handleSelectionChange:function(e){this.multipleSelection=e}}}},564:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v(" 服务器信息管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("管理员信息表")])],1)],1),e._v(" "),a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:e.delAll}},[e._v("批量删除")]),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"姓名"},model:{value:e.select.Name,callback:function(t){e.$set(e.select,"Name",t)},expression:"select.Name"}}),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择责任部门"},model:{value:e.select.Dp.Name,callback:function(t){e.$set(e.select.Dp,"Name",t)},expression:"select.Dp.Name"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.paging.page-1)*e.paging.pageSize,e.paging.page*e.paging.pageSize),border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"ID",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Dp.Name",label:"责任部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"PhoneNumber",label:"电话"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next",total:e.paging.total,"page-size":e.paging.pageSize},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"姓名",prop:"Name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.Name,callback:function(t){e.$set(e.editForm,"Name",t)},expression:"editForm.Name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"责任部门"}},[a("el-select",{attrs:{placeholder:"请选择责任部门"},model:{value:e.editForm.Dp.Name,callback:function(t){e.$set(e.editForm.Dp,"Name",t)},expression:"editForm.Dp.Name"}},e._l(e.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.value))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"PhoneNumber"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.PhoneNumber,callback:function(t){e.$set(e.editForm,"PhoneNumber",t)},expression:"editForm.PhoneNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"姓名",prop:"Name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.Name,callback:function(t){e.$set(e.addForm,"Name",t)},expression:"addForm.Name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"责任部门",prop:"Options"}},[a("el-select",{attrs:{placeholder:"请选择责任部门"},model:{value:e.addForm.Dp.Name,callback:function(t){e.$set(e.addForm.Dp,"Name",t)},expression:"addForm.Dp.Name"}},e._l(e.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.value))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"PhoneNumber"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.PhoneNumber,callback:function(t){e.$set(e.addForm,"PhoneNumber",t)},expression:"addForm.PhoneNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}}});