webpackJsonp([11],{526:function(e,t,a){var i=a(200)(a(544),a(563),null,null);e.exports=i.exports},544:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(201),s=a.n(i);t.default={data:function(){return{tableData:[],multipleSelection:[],names:[],paging:{total:0,pageSize:15,page:1},editFormVisible:!1,editLoading:!1,editFormRules:{Name:[{required:!0,message:"请输入责任部门",trigger:"blur"}]},editForm:{Id:0,Name:"",NewName:""},addFormVisible:!1,addLoading:!1,addFormRules:{Name:[{required:!0,message:"请输入责任部门",trigger:"blur"}]},addForm:{Id:0,Name:""}}},created:function(){this.getData()},methods:{handleCurrentChange:function(e){this.paging.page=e},getData:function(){var e=this;this.$axios.post("/servermanage/department/getall").then(function(t){if(7002===t.data.status)e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"});else{var a=t.data.departments;e.tableData=a,e.paging.total=a.length}})},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=s()({},t),this.editForm.NewName=""},handleAdd:function(){this.addFormVisible=!0,this.addForm.Name=""},handleDelete:function(e,t){var a=this,i=s()({},t);this.$axios.post("/servermanage/department/remove",i).then(function(e){switch(e.data.status){case 4003:a.$message.success("删除成功!");break;case 9004:a.$message.error("删除失败!");break;case 7002:a.$message({message:"您未登录！",type:"error"}),a.$router.push({path:"/login"})}a.getData()})},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=s()({},e.editForm);""===t.newName&&(t.newName=e.editForm.Name),console.log(t),e.$axios.post("/servermanage/department/set",t).then(function(a){switch(console.log(t),e.editLoading=!1,a.data.status){case 4003:e.$message({message:"编辑成功",type:"success"});break;case 8002:e.$message({message:"编辑失败",type:"error"});break;case 7002:e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"})}e.$refs.editForm.resetFields(),e.editFormVisible=!1,e.getData()})})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=s()({},e.addForm);e.$axios.post("/servermanage/department/add",t).then(function(t){switch(e.addLoading=!1,t.data.status){case 4003:e.$message({message:"添加成功",type:"success"});break;case 8001:e.$message({message:"该部门已存在!",type:"error"});break;case 7002:e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"})}e.$refs.addForm.resetFields(),e.addFormVisible=!1,e.getData()})})})},handleSelectionChange:function(e){this.multipleSelection=e}}}},563:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v(" 服务器信息管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("责任部门信息表")])],1)],1),e._v(" "),a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.paging.page-1)*e.paging.pageSize,e.paging.page*e.paging.pageSize),border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"ID",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Name",label:"责任部门"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next",total:e.paging.total,"page-size":e.paging.pageSize},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"责任部门"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.editForm.Name,callback:function(t){e.$set(e.editForm,"Name",t)},expression:"editForm.Name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新部门名",prop:"Name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.NewName,callback:function(t){e.$set(e.editForm,"NewName",t)},expression:"editForm.NewName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"责任部门",prop:"Name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.Name,callback:function(t){e.$set(e.addForm,"Name",t)},expression:"addForm.Name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}}});