webpackJsonp([7],{522:function(e,t,a){var i=a(200)(a(540),a(574),null,null);e.exports=i.exports},530:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"d",function(){return r}),a.d(t,"c",function(){return s}),a.d(t,"a",function(){return l});var i=function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},r=function(e,t){for(var a=0;a<t.length;a++)e.push({value:t[a].WebName})},s=function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},l=function(e,t,a,i,r){for(var s=t.length,l=0;l<s;l++)t[l].Time>i&&t[l].Time<r&&e.push(t[l])}},540:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(201),r=a.n(i),s=a(530);t.default={data:function(){return{tableData:[],multipleSelection:[],webName:[],select:{WebName:"",Url:""},del_list:[],urls:[],is_search:!1,paging:{total:0,pageSize:15,page:1},editFormVisible:!1,editLoading:!1,FormRules:{WebName:[{required:!0,message:"请输入项目名",trigger:"blur"}],Url:[{required:!0,message:"请输入链接",trigger:"blur"}],Ip:[{required:!0,message:"请输入IP",trigger:"blur"}]},editForm:{Id:0,WebName:"",Url:"",Ip:"",SleepTime:0},addFormVisible:!1,addLoading:!1,addForm:{Id:0,WebName:"",Url:"",Ip:"",SleepTime:0}}},created:function(){this.is_search=!1,this.select.Url="",this.select.WebName="",this.getData()},methods:{handleCurrentChange:function(e){this.paging.page=e},getData:function(){var e=this;this.$axios.get("/dnsmonitor/getdnsall").then(function(t){if(7002===t.data.status)e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"});else{var i=t.data.record;e.tableData=i,e.paging.total=i.length,0===e.webName.length&&a.i(s.d)(e.webName,e.tableData)}})},search:function(){""===this.select.WebName&&""===this.select.Url?(this.is_search=!1,this.querySearch()):(this.is_search=!0,this.querySearch())},querySearch:function(){var e=this;if(this.is_search){var t=r()({},this.select);this.$axios.post("/dnsmonitor/query",t).then(function(t){if(7002===t.data.status)e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"});else switch(t.data.status){case 4003:e.tableData=t.data.record,e.paging.total=t.data.record.length;break;case 4004:e.tableData=[]}})}else this.getData()},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=r()({},t),5===this.editForm.SleepTime?this.editForm.SleepTime=1:this.editForm.SleepTime=0},handleAdd:function(){this.addFormVisible=!0,this.addForm={WebName:"",SleepTime:1,Url:"",Ip:""}},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=r()({},e.editForm);1===t.SleepTime?t.SleepTime=5:t.SleepTime=10,e.$axios.post("/dnsmonitor/update",t).then(function(t){switch(e.editLoading=!1,t.data.status){case 4001:e.$message({message:"参数不完全",type:"error"});break;case 6002:e.$message({message:"编辑成功",type:"success"});break;case 6003:e.$message({message:"编辑失败",type:"error"});break;case 7002:e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"})}e.$refs.editForm.resetFields(),e.editFormVisible=!1,e.getData()})})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=r()({},e.addForm);1===t.SleepTime?t.SleepTime=5:t.SleepTime=10,e.$axios.post("/dnsmonitor/add",t).then(function(t){switch(e.editLoading=!1,t.data.status){case 4001:e.$message({message:"参数不完全",type:"error"});break;case 6e3:e.$message({message:"添加成功",type:"success"});break;case 6001:e.$message({message:"添加失败",type:"error"});break;case 7002:e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"})}e.$refs.addForm.resetFields(),e.addFormVisible=!1,e.getData()})})})},handleDelete:function(e,t){var a=this;this.editForm=r()({},t),this.urls[0]=this.editForm.Url,console.log(this.urls),this.$axios.post("/dnsmonitor/del",this.urls).then(function(e){switch(e.data.status){case 4001:a.$message.error("参数不完全!");break;case 6004:a.$message.success("删除成功!"),a.getData();break;case 6005:a.$message.error("删除失败!");break;case 7002:a.$message({message:"您未登录！",type:"error"}),a.$router.push({path:"/login"})}})},delAll:function(){for(var e=this,t=this,a=t.multipleSelection.length,i="",r=0;r<a;r++)i+=t.multipleSelection[r].WebName+" ",t.urls[r]=t.multipleSelection[r].Url;t.$axios.post("/dnsmonitor/del",t.urls).then(function(a){var r=a.data;switch(r.status){case 4001:t.$message.error("参数不完全");break;case 6004:t.$message.success("删除了"+i),t.getData();break;case 6005:t.$message.error("批量删除到"+r.errName+"时失败!"),t.getData();break;case 7002:e.$message({message:"您未登录！",type:"error"}),e.$router.push({path:"/login"})}}),t.multipleSelection=[]},handleSelectionChange:function(e){this.multipleSelection=e},query:function(e,t){var i=this.webName;t(e?i.filter(a.i(s.c)(e)):i)}}}},574:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v(" 域名解析")]),e._v(" "),a("el-breadcrumb-item",[e._v("解析列表")])],1)],1),e._v(" "),a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:e.delAll}},[e._v("批量删除")]),e._v(" "),a("el-autocomplete",{staticClass:"inline-input",attrs:{placeholder:"网站名称","fetch-suggestions":e.query,"trigger-on-focus":!1},model:{value:e.select.WebName,callback:function(t){e.$set(e.select,"WebName",t)},expression:"select.WebName"}}),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"链接"},model:{value:e.select.Url,callback:function(t){e.$set(e.select,"Url",t)},expression:"select.Url"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.paging.page-1)*e.paging.pageSize,e.paging.page*e.paging.pageSize),border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"ID",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"WebName",label:"网站名称",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Url",label:"网址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Ip",label:"IP"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SleepTime",label:"监测频率(分钟)"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next",total:e.paging.total,"page-size":e.paging.pageSize},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"网站名称",prop:"WebName"}},[a("el-input",{attrs:{"auto-complete":"off",width:"60"},model:{value:e.editForm.WebName,callback:function(t){e.$set(e.editForm,"WebName",t)},expression:"editForm.WebName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"监测频率(分钟)"}},[a("el-radio-group",{model:{value:e.editForm.SleepTime,callback:function(t){e.$set(e.editForm,"SleepTime",t)},expression:"editForm.SleepTime"}},[a("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("5")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("10")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"网址",prop:"Url"}},[a("el-input",{attrs:{"auto-complete":"off",width:"60"},model:{value:e.editForm.Url,callback:function(t){e.$set(e.editForm,"Url",t)},expression:"editForm.Url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"IP",prop:"Ip"}},[a("el-input",{attrs:{"auto-complete":"off",width:"60"},model:{value:e.editForm.Ip,callback:function(t){e.$set(e.editForm,"Ip",t)},expression:"editForm.Ip"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"网站名称",prop:"WebName"}},[a("el-input",{attrs:{"auto-complete":"off",width:"60"},model:{value:e.addForm.WebName,callback:function(t){e.$set(e.addForm,"WebName",t)},expression:"addForm.WebName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"监测频率(分钟)"}},[a("el-radio-group",{model:{value:e.addForm.SleepTime,callback:function(t){e.$set(e.addForm,"SleepTime",t)},expression:"addForm.SleepTime"}},[a("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("5")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("10")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"网址",prop:"Url"}},[a("el-input",{attrs:{"auto-complete":"off",width:"60"},model:{value:e.addForm.Url,callback:function(t){e.$set(e.addForm,"Url",t)},expression:"addForm.Url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"IP",prop:"Ip"}},[a("el-input",{attrs:{"auto-complete":"off",width:"60"},model:{value:e.addForm.Ip,callback:function(t){e.$set(e.addForm,"Ip",t)},expression:"addForm.Ip"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}}});